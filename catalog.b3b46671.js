function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},t.parcelRequired7c6=i),i.register("2jcRC",(function(e,t){const n=document.getElementById("menu"),a=document.querySelector("nav"),i=document.getElementById("overlay"),r=document.querySelector("body");n.addEventListener("click",(()=>{a.style.left="0",i.style.display="block",r.style.overflow="hidden"})),i.addEventListener("click",(()=>{a.style.left="-64%",i.style.display="none",r.style.overflow="auto"}));const s=document.querySelector(".switcher");let o="true"===localStorage.getItem("isLight");document.body.classList.toggle("light",o),s.onclick=function(){o=!o,document.body.classList.toggle("light",o),localStorage.setItem("isLight",o)};const c=window.location.href,l=document.querySelectorAll(".mobile-menu__link, .header__nav-link");if(l[0].classList.add("current__nav-link"),l[3].classList.add("current__nav-link"),!c.includes("index"))return c.includes("catalog")?(l[0].classList.remove("current__nav-link"),l[3].classList.remove("current__nav-link"),l[1].classList.add("current__nav-link"),void l[4].classList.add("current__nav-link")):c.includes("library")?(l[0].classList.remove("current__nav-link"),l[3].classList.remove("current__nav-link"),l[1].classList.remove("current__nav-link"),l[4].classList.remove("current__nav-link"),l[2].classList.add("current__nav-link"),void l[5].classList.add("current__nav-link")):void 0})),i("kyEFX").register(JSON.parse('{"9NLH0":"catalog.b3b46671.js","bfHyM":"default.183d728c.jpg","1V5gE":"catalog.9d31d520.js"}')),i("2jcRC"),i("6q4Ta");const r={searchForm:document.getElementById("movieSearchForm"),searchInput:document.getElementById("movieInput"),catalogList:document.getElementById("movieList"),errorContainer:document.querySelector(".error-container"),searchBtn:document.querySelector(".search-button"),cancelBtn:document.querySelector(".cancel-button"),paginationContainer:document.querySelector(".pagination-pages-list"),paginationButton:document.querySelector(".pagination-button"),nextPageBtn:document.querySelector(".next-button"),prevPageBtn:document.querySelector(".prev-button")};class s{static BASE_URL="https://api.themoviedb.org/3";static API_KEY="41b8f9437bf3f899281f8a3f9bdc0891";constructor(){this.searchQuery="",this.page=1,this.totalAmount=0}async getMovies(){const e={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${s.API_KEY}`}};let t="";t=this.searchQuery?`${s.BASE_URL}/search/movie?api_key=${s.API_KEY}&query=${this.searchQuery}&include_adult=false&language=en-US&page=${this.page}`:`${s.BASE_URL}/trending/all/week?api_key=${s.API_KEY}&language=en-US&page=${this.page}`;try{const n=await fetch(t,e);return await n.json()}catch(e){throw console.error(e),e}}incrementPage(){this.page+=1}decrementPage(){this.page-=1}resetPage(){this.page=1}get query(){return this.searchQuery}set query(e){this.searchQuery=e}get total(){return this.totalAmount}set total(e){this.totalAmount=e}resetTotal(){this.totalAmount=0}}let o=!1;const c=()=>{const e=document.querySelector(".pagination-wrapper");if(o)return;const t=document.createElement("div");t.innerHTML='<p class="error-information">OOPS...</p>\n  <p class="error-information">We are very sorry!</p>\n  <p class="error-information">\n    We donâ€™t have any results matching your search.\n  </p>',r.errorContainer.appendChild(t),r.errorContainer.classList.remove("is-hidden"),e.classList.add("is-hidden"),o=!0};var l;l=new URL(i("kyEFX").resolve("bfHyM"),import.meta.url).toString();var d=i("7DS8N"),u=i("5bV6Z"),g=i("a3ItO");async function p(t){const n=JSON.parse(localStorage.getItem("genres")),a=t.results.map((async t=>{const a=t.poster_path?`https://image.tmdb.org/t/p/w500${t.poster_path}`:`${e(l)}`,i=(0,u.validateGenres)(t.genre_ids,n),r=await i;return`<li class="card-item" data-id="${t.id}">\n        <img class="film-poster" src="${a}" alt="${t.original_title||t.name}" />\n        <div class="overlay">\n          <div class="film-info">\n            <p class="film-title">${t.original_title||t.name}</p>\n            <div class="film-details">\n              <span class="film-description">${r} | ${new Date(t.release_date).getFullYear()||new Date(t.first_air_date).getFullYear()}</span>\n    <div class="stars-container">${(0,d.default)({voteAverage:t.vote_average,isHero:!1})}</div>            \n      \x3c!-- <span class="film-rating">${t.vote_average.toFixed(1)}</span> --\x3e\n            </div>\n          </div>\n        </div>\n      </li>`})),i=await Promise.all(a);r.catalogList.innerHTML=i.join("");document.querySelector(".listListener").addEventListener("click",(e=>{const t=e.target.closest(".card-item").getAttribute("data-id");(0,g.openModalAboutFilm)(t)}))}const m=new s,v=document.querySelector(".pagination-wrapper");let h=1,f=0;function y(e){m.getMovies(e).then(_).catch(b)}function _(e){var t;f=e.total_pages,p(e),t=e.total_pages,h===t?r.nextPageBtn.setAttribute("disabled","disabled"):r.nextPageBtn.removeAttribute("disabled"),E(f,h)}function b(e){r.catalogList.innerHTML="",c(),console.error("An error occurred:",e)}function L(){r.catalogList.innerHTML="",c()}function E(e,t){let n="",a=t+1,i=t-1;e>5&&t>2&&(n+='<li class="pagination-item">\n        <button type="button" class="pagination-button">1</button>\n      </li>',t>3&&(n+='<li class="pagination-item">\n          <button type="button" class="pagination-dots">...</button>\n        </li>')),(t==e||t==e-1)&&(i-=1),(1==t||2==t)&&(a+=1);for(let r=i;r<=a;r++)r>e||r<1||(active=t==r?"is-active":"",n+=`<li class="pagination-item">\n      <button type="button" class="pagination-button ${active}">${r}</button>\n    </li>`);return e>5&&t<e-1&&(t<e-2&&(n+='<li class="pagination-item">\n        <button type="button" class="pagination-dots">...</button>\n      </li>'),n+=`<li class="pagination-item">\n      <button type="button" class="pagination-button">${e}</button>\n    </li>`),r.paginationContainer.innerHTML=n,n}r.searchForm.addEventListener("submit",(function(e){e.preventDefault(),r.paginationContainer.classList.remove("is-hidden"),r.errorContainer.classList.add("is-hidden");const t=r.searchInput.value.trim();m.query=t,m.resetPage(),m.resetTotal(),""===t?L():async function(){try{const e=await m.getMovies();0===e.total_results?L():(v.classList.remove("is-hidden"),f=e.total_pages,m.total=e.total_results,p(e),h=e.page,E(f,h)),r.searchInput.value=""}catch(e){b(e)}}()})),r.cancelBtn.addEventListener("click",(function(){r.cancelBtn.classList.add("is-hidden"),r.searchInput.value=""})),r.searchInput.addEventListener("input",(function(e){e.currentTarget.value.trim()?r.cancelBtn.classList.remove("is-hidden"):r.cancelBtn.classList.add("is-hidden")})),r.nextPageBtn.addEventListener("click",(function(){h+=1,m.incrementPage(),y(h)})),r.prevPageBtn.addEventListener("click",(function(){h>1&&(h-=1,m.decrementPage(),y(h))})),r.paginationContainer.addEventListener("click",(function(e){if("BUTTON"===e.target.tagName){const t=parseInt(e.target.textContent);isNaN(t)||t===h||(h=t,m.page=t,y(h))}})),r.errorContainer.classList.add("is-hidden"),r.cancelBtn.classList.add("is-hidden"),y(h),i("4E5Dt"),i("haKcb");
//# sourceMappingURL=catalog.b3b46671.js.map
